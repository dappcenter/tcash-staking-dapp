{"version":3,"sources":["containers/Dashboard/Web3SignIn/Web3SignIn.js","containers/Dashboard/Web3SignIn/logic.js","containers/Dashboard/Web3SignIn/index.js","containers/Dashboard/Web3SignIn/styles.js"],"names":["Web3SignIn","useWeb3React","library","account","activate","active","error","deactivate","language","useSelector","state","settings","walletID","walletAddress","dispatch","useDispatch","setWalletID","useCallback","_walletID","settingsSetWalletID","setWalletAddress","_walletAddress","settingsSetWalletAddress","secureSwitchWallet","settingsLogout","useEffect","onActivate","onSetWalletID","infuraUrl","NetworkConnector","urls","1","catch","InjectedConnector","supportedChainIds","LedgerConnector","chainId","url","TrezorConnector","manifestAppUrl","manifestEmail","WalletConnectConnector","rpc","AuthereumConnector","FortmaticConnector","apiKey","PortisConnector","dAppId","networks","SquarelinkConnector","clientId","TorusConnector","tryToOpenWalletIfNotActive","onSetWalletAddress","isLoading","value","saveAddressWalletOrENS","messages","languageProvider","exact","from","to","onSelectWallet","walletLoading","onUpdateWalletAddress","withStyles","theme","btnTranslate","position","right","spacing","top","zIndex"],"mappings":"0UAiEeA,EA/CI,WAAO,IAAD,EAGnBC,cADFC,EAFqB,EAErBA,QAASC,EAFY,EAEZA,QAASC,EAFG,EAEHA,SAAUC,EAFP,EAEOA,OAAQC,EAFf,EAEeA,MAAOC,EAFtB,EAEsBA,WAEvCC,EAAWC,aAAY,SAACC,GAAD,OAAWA,EAAMC,SAASH,YACjDI,EAAWH,aAAY,SAACC,GAAD,OAAWA,EAAMC,SAASC,YACjDC,EAAgBJ,aAAY,SAACC,GAAD,OAAWA,EAAMC,SAASE,iBACtDC,EAAWC,cACXC,EAAcC,uBAAY,SAACC,GAAD,OAAeJ,EAC7CK,YAAoBD,MACnB,CAACJ,IACEM,EAAmBH,uBAAY,SAACI,GAAD,OAAoBP,EACvDQ,YAAyBpB,EAASmB,MACjC,CAACP,EAAUZ,IACRqB,EAAqBN,uBAAY,SAACC,GAAD,OAAeJ,EACpDU,YAAejB,EAAYW,MAC1B,CAACJ,EAAUP,IAEdkB,qBAAU,YCxB8B,SAACpB,EAAQO,EAAUc,EAAYC,GACvE,IAAMC,EAAY,gEAElB,IAAKvB,EACH,OAAQO,GACN,KAAK,EACHc,EAAW,IAAIG,IAAiB,CAAEC,KAAM,CAAEC,EAAGH,MAC1CI,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIO,IAAkB,CAAEC,kBAAmB,CAAC,EAAG,EAAG,EAAG,EAAG,OAChEF,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIS,IAAgB,CAAEC,QAAS,EAAGC,IAAKT,KAC/CI,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIY,IAAgB,CAC7BF,QAAS,EACTG,eAAgB,wBAChBC,cAAe,gBACfH,IAAKT,KAEJI,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIe,IAAuB,CAAEC,IAAK,CAAEX,EAAGH,MAC/CI,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIiB,IAAmB,CAAEP,QAAS,KAC1CJ,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIkB,IAAmB,CAAEC,OAAQ,2BAA4BT,QAAS,KAC9EJ,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIoB,IAAgB,CAAEC,OAAQ,uCAAwCC,SAAU,CAAC,MACzFhB,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,EACHD,EAAW,IAAIuB,IAAoB,CAAEC,SAAU,GAAIF,SAAU,CAAC,MAC3DhB,OAAM,kBAAML,EAAc,MAC7B,MACF,KAAK,GACHD,EAAW,IAAIyB,IAAe,CAAEf,QAAS,KACtCJ,OAAM,kBAAML,EAAc,MAC7B,MACF,QACEA,EAAc,ID1BlByB,CAA2B/C,EAAQO,EAAUR,EAAUY,KACtD,CAACX,EAAQO,EAAUR,EAAUY,IAEhCS,qBAAU,WACJnB,GAAOU,EAAY,KACtB,CAACV,EAAOU,IAEXS,qBAAU,YC0B0B,SAACvB,EAASW,EAC9CV,EAASkD,GACHnD,IAAYW,EAAcyC,WACzBnD,GAAWU,EAAc0C,QAAUpD,GAASkD,EAAmBlD,GD5BpEqD,CAAuBtD,EAASW,EAAeV,EAASiB,KACvD,CAAClB,EAASW,EAAeV,EAASiB,IAErC,IAAMqC,EAAWC,IAAiBlD,GAElC,OAAMK,EAAc0C,OAAWrD,EAAiB,kBAAC,IAAD,CAAUyD,OAAK,EAACC,KAAK,SAASC,GAAG,MAG/E,kBAAC,IAAD,CACEJ,SAAUA,EACVK,eAAgBvC,EAChBwC,cAAenD,EACfoD,sBAAuB5C,EACvBkC,UAAWzC,EAAcyC,aEtDhBW,uBCJA,SAACC,GAAD,MAAY,CACzBC,aAAc,CACZC,SAAU,mBACVC,MAAOH,EAAMI,QAAQ,GACrBC,IAAKL,EAAMI,QAAQ,GACnBE,OAAQ,ODDGP,CAAmBjE","file":"static/js/8.e8a7f31e.chunk.js","sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useWeb3React } from '@web3-react/core';\nimport { Redirect } from 'react-router-dom';\n\nimport extProps from './propTypes';\nimport languageProvider from '../../../translations';\nimport { Web3SignInGrid } from '../../../components';\nimport { settingsLogout, settingsSetWalletAddress, settingsSetWalletID } from '../../../redux/features/settings/action';\nimport { saveAddressWalletOrENS, tryToOpenWalletIfNotActive } from './logic';\n\n/*\n *\n * Sign in with web3 wallet or read only with RPC\n * Save in localStorage the wallet used\n *\n */\n\nconst Web3SignIn = () => {\n  const {\n    library, account, activate, active, error, deactivate,\n  } = useWeb3React();\n  const language = useSelector((state) => state.settings.language);\n  const walletID = useSelector((state) => state.settings.walletID);\n  const walletAddress = useSelector((state) => state.settings.walletAddress);\n  const dispatch = useDispatch();\n  const setWalletID = useCallback((_walletID) => dispatch(\n    settingsSetWalletID(_walletID),\n  ), [dispatch]);\n  const setWalletAddress = useCallback((_walletAddress) => dispatch(\n    settingsSetWalletAddress(library, _walletAddress),\n  ), [dispatch, library]);\n  const secureSwitchWallet = useCallback((_walletID) => dispatch(\n    settingsLogout(deactivate, _walletID),\n  ), [dispatch, deactivate]);\n\n  useEffect(() => {\n    tryToOpenWalletIfNotActive(active, walletID, activate, setWalletID);\n  }, [active, walletID, activate, setWalletID]);\n\n  useEffect(() => {\n    if (error) setWalletID(0);\n  }, [error, setWalletID]);\n\n  useEffect(() => {\n    saveAddressWalletOrENS(library, walletAddress, account, setWalletAddress);\n  }, [library, walletAddress, account, setWalletAddress]);\n\n  const messages = languageProvider[language];\n\n  if (!!walletAddress.value && !!library) return (<Redirect exact from=\"/login\" to=\"/\" />);\n\n  return (\n    <Web3SignInGrid\n      messages={messages}\n      onSelectWallet={secureSwitchWallet}\n      walletLoading={walletID}\n      onUpdateWalletAddress={setWalletAddress}\n      isLoading={walletAddress.isLoading}\n    />\n  );\n};\n\nWeb3SignIn.propTypes = extProps;\n\nexport default Web3SignIn;\n","import { InjectedConnector } from '@web3-react/injected-connector';\nimport { LedgerConnector } from '@web3-react/ledger-connector';\nimport { TrezorConnector } from '@web3-react/trezor-connector';\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector';\nimport { AuthereumConnector } from '@web3-react/authereum-connector';\nimport { FortmaticConnector } from '@web3-react/fortmatic-connector';\nimport { PortisConnector } from '@web3-react/portis-connector';\nimport { SquarelinkConnector } from '@web3-react/squarelink-connector';\nimport { TorusConnector } from '@web3-react/torus-connector';\nimport { NetworkConnector } from '@web3-react/network-connector';\n\n// Activate wallet if not web3 hook not already active\nexport const tryToOpenWalletIfNotActive = (active, walletID, onActivate, onSetWalletID) => {\n  const infuraUrl = \"https://mainnet.infura.io/v3/eacbca807a3e4344b58e77825b1b12d6\";\n\n  if (!active) {\n    switch (walletID) {\n      case 1: // Read-only\n        onActivate(new NetworkConnector({ urls: { 1: infuraUrl } }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 2: // Metamask\n        onActivate(new InjectedConnector({ supportedChainIds: [1, 3, 4, 5, 42] }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 3:\n        onActivate(new LedgerConnector({ chainId: 1, url: infuraUrl }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 4:\n        onActivate(new TrezorConnector({\n          chainId: 1,\n          manifestAppUrl: 'https://stake.o2b.dev',\n          manifestEmail: 'nolan@o2b.dev',\n          url: infuraUrl,\n        }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 5:\n        onActivate(new WalletConnectConnector({ rpc: { 1: infuraUrl } }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 6:\n        onActivate(new AuthereumConnector({ chainId: 1 }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 7:\n        onActivate(new FortmaticConnector({ apiKey: 'pk_live_01129497FC783931', chainId: 1 }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 8:\n        onActivate(new PortisConnector({ dAppId: '0e834d4c-cea9-4770-9c52-679fe5580bad', networks: [1] }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 9:\n        onActivate(new SquarelinkConnector({ clientId: '', networks: [1] }))\n          .catch(() => onSetWalletID(0));\n        break;\n      case 10:\n        onActivate(new TorusConnector({ chainId: 1 }))\n          .catch(() => onSetWalletID(0));\n        break;\n      default: // No wallet\n        onSetWalletID(0);\n        break;\n    }\n  }\n};\n\n// Set and save wallet address, if read-only resolve ENS\nexport const saveAddressWalletOrENS = (library, walletAddress,\n  account, onSetWalletAddress) => {\n  if (!!library && !walletAddress.isLoading\n    && !!account && walletAddress.value !== account) onSetWalletAddress(account);\n};\n","import { withStyles } from '@material-ui/core/styles';\nimport styles from './styles';\nimport Web3SignIn from './Web3SignIn';\n\nexport default withStyles(styles)(Web3SignIn);\n","export default (theme) => ({\n  btnTranslate: {\n    position: 'fixed !important',\n    right: theme.spacing(2),\n    top: theme.spacing(2),\n    zIndex: 55,\n  },\n});\n"],"sourceRoot":""}